var Fe=e=>{throw TypeError(e)};var se=(e,t,s)=>t.has(e)||Fe("Cannot "+s);var i=(e,t,s)=>(se(e,t,"read from private field"),s?s.call(e):t.get(e)),f=(e,t,s)=>t.has(e)?Fe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),c=(e,t,s,r)=>(se(e,t,"write to private field"),r?r.call(e,s):t.set(e,s),s),p=(e,t,s)=>(se(e,t,"access private method"),s);var Bt=(e,t,s,r)=>({set _(n){c(e,t,n,s)},get _(){return i(e,t,r)}});function Ss(e,t){for(var s=0;s<t.length;s++){const r=t[s];if(typeof r!="string"&&!Array.isArray(r)){for(const n in r)if(n!=="default"&&!(n in e)){const o=Object.getOwnPropertyDescriptor(r,n);o&&Object.defineProperty(e,n,o.get?o:{enumerable:!0,get:()=>r[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var Cr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ws(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Er(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(s,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}),s}var ze={exports:{}},ee={},We={exports:{}},y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kt=Symbol.for("react.element"),Ps=Symbol.for("react.portal"),Cs=Symbol.for("react.fragment"),Es=Symbol.for("react.strict_mode"),Fs=Symbol.for("react.profiler"),_s=Symbol.for("react.provider"),xs=Symbol.for("react.context"),Ms=Symbol.for("react.forward_ref"),Qs=Symbol.for("react.suspense"),Ds=Symbol.for("react.memo"),Ts=Symbol.for("react.lazy"),_e=Symbol.iterator;function js(e){return e===null||typeof e!="object"?null:(e=_e&&e[_e]||e["@@iterator"],typeof e=="function"?e:null)}var Je={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ye=Object.assign,Xe={};function jt(e,t,s){this.props=e,this.context=t,this.refs=Xe,this.updater=s||Je}jt.prototype.isReactComponent={};jt.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};jt.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ze(){}Ze.prototype=jt.prototype;function be(e,t,s){this.props=e,this.context=t,this.refs=Xe,this.updater=s||Je}var Oe=be.prototype=new Ze;Oe.constructor=be;Ye(Oe,jt.prototype);Oe.isPureReactComponent=!0;var xe=Array.isArray,ts=Object.prototype.hasOwnProperty,Re={current:null},es={key:!0,ref:!0,__self:!0,__source:!0};function ss(e,t,s){var r,n={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)ts.call(t,r)&&!es.hasOwnProperty(r)&&(n[r]=t[r]);var u=arguments.length-2;if(u===1)n.children=s;else if(1<u){for(var h=Array(u),l=0;l<u;l++)h[l]=arguments[l+2];n.children=h}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)n[r]===void 0&&(n[r]=u[r]);return{$$typeof:Kt,type:e,key:o,ref:a,props:n,_owner:Re.current}}function Is(e,t){return{$$typeof:Kt,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Se(e){return typeof e=="object"&&e!==null&&e.$$typeof===Kt}function ks(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Me=/\/+/g;function re(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ks(""+e.key):t.toString(36)}function Wt(e,t,s,r,n){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Kt:case Ps:a=!0}}if(a)return a=e,n=n(a),e=r===""?"."+re(a,0):r,xe(n)?(s="",e!=null&&(s=e.replace(Me,"$&/")+"/"),Wt(n,t,s,"",function(l){return l})):n!=null&&(Se(n)&&(n=Is(n,s+(!n.key||a&&a.key===n.key?"":(""+n.key).replace(Me,"$&/")+"/")+e)),t.push(n)),1;if(a=0,r=r===""?".":r+":",xe(e))for(var u=0;u<e.length;u++){o=e[u];var h=r+re(o,u);a+=Wt(o,t,s,h,n)}else if(h=js(e),typeof h=="function")for(e=h.call(e),u=0;!(o=e.next()).done;)o=o.value,h=r+re(o,u++),a+=Wt(o,t,s,h,n);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Vt(e,t,s){if(e==null)return e;var r=[],n=0;return Wt(e,r,"","",function(o){return t.call(s,o,n++)}),r}function As(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Q={current:null},Jt={transition:null},qs={ReactCurrentDispatcher:Q,ReactCurrentBatchConfig:Jt,ReactCurrentOwner:Re};function rs(){throw Error("act(...) is not supported in production builds of React.")}y.Children={map:Vt,forEach:function(e,t,s){Vt(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Vt(e,function(){t++}),t},toArray:function(e){return Vt(e,function(t){return t})||[]},only:function(e){if(!Se(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};y.Component=jt;y.Fragment=Cs;y.Profiler=Fs;y.PureComponent=be;y.StrictMode=Es;y.Suspense=Qs;y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qs;y.act=rs;y.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Ye({},e.props),n=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Re.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(h in t)ts.call(t,h)&&!es.hasOwnProperty(h)&&(r[h]=t[h]===void 0&&u!==void 0?u[h]:t[h])}var h=arguments.length-2;if(h===1)r.children=s;else if(1<h){u=Array(h);for(var l=0;l<h;l++)u[l]=arguments[l+2];r.children=u}return{$$typeof:Kt,type:e.type,key:n,ref:o,props:r,_owner:a}};y.createContext=function(e){return e={$$typeof:xs,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:_s,_context:e},e.Consumer=e};y.createElement=ss;y.createFactory=function(e){var t=ss.bind(null,e);return t.type=e,t};y.createRef=function(){return{current:null}};y.forwardRef=function(e){return{$$typeof:Ms,render:e}};y.isValidElement=Se;y.lazy=function(e){return{$$typeof:Ts,_payload:{_status:-1,_result:e},_init:As}};y.memo=function(e,t){return{$$typeof:Ds,type:e,compare:t===void 0?null:t}};y.startTransition=function(e){var t=Jt.transition;Jt.transition={};try{e()}finally{Jt.transition=t}};y.unstable_act=rs;y.useCallback=function(e,t){return Q.current.useCallback(e,t)};y.useContext=function(e){return Q.current.useContext(e)};y.useDebugValue=function(){};y.useDeferredValue=function(e){return Q.current.useDeferredValue(e)};y.useEffect=function(e,t){return Q.current.useEffect(e,t)};y.useId=function(){return Q.current.useId()};y.useImperativeHandle=function(e,t,s){return Q.current.useImperativeHandle(e,t,s)};y.useInsertionEffect=function(e,t){return Q.current.useInsertionEffect(e,t)};y.useLayoutEffect=function(e,t){return Q.current.useLayoutEffect(e,t)};y.useMemo=function(e,t){return Q.current.useMemo(e,t)};y.useReducer=function(e,t,s){return Q.current.useReducer(e,t,s)};y.useRef=function(e){return Q.current.useRef(e)};y.useState=function(e){return Q.current.useState(e)};y.useSyncExternalStore=function(e,t,s){return Q.current.useSyncExternalStore(e,t,s)};y.useTransition=function(){return Q.current.useTransition()};y.version="18.3.1";We.exports=y;var S=We.exports;const Us=ws(S),Fr=Ss({__proto__:null,default:Us},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ls=S,$s=Symbol.for("react.element"),Ns=Symbol.for("react.fragment"),Ks=Object.prototype.hasOwnProperty,Hs=Ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gs={key:!0,ref:!0,__self:!0,__source:!0};function is(e,t,s){var r,n={},o=null,a=null;s!==void 0&&(o=""+s),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Ks.call(t,r)&&!Gs.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:$s,type:e,key:o,ref:a,props:n,_owner:Hs.current}}ee.Fragment=Ns;ee.jsx=is;ee.jsxs=is;ze.exports=ee;var Bs=ze.exports,It=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},bt=typeof window>"u"||"Deno"in globalThis;function M(){}function Vs(e,t){return typeof e=="function"?e(t):e}function ne(e){return typeof e=="number"&&e>=0&&e!==1/0}function ns(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ut(e,t){return typeof e=="function"?e(t):e}function A(e,t){return typeof e=="function"?e(t):e}function Qe(e,t){const{type:s="all",exact:r,fetchStatus:n,predicate:o,queryKey:a,stale:u}=e;if(a){if(r){if(t.queryHash!==we(a,t.options))return!1}else if(!qt(t.queryKey,a))return!1}if(s!=="all"){const h=t.isActive();if(s==="active"&&!h||s==="inactive"&&h)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||n&&n!==t.state.fetchStatus||o&&!o(t))}function De(e,t){const{exact:s,status:r,predicate:n,mutationKey:o}=e;if(o){if(!t.options.mutationKey)return!1;if(s){if(Ot(t.options.mutationKey)!==Ot(o))return!1}else if(!qt(t.options.mutationKey,o))return!1}return!(r&&t.state.status!==r||n&&!n(t))}function we(e,t){return(t?.queryKeyHashFn||Ot)(e)}function Ot(e){return JSON.stringify(e,(t,s)=>oe(s)?Object.keys(s).sort().reduce((r,n)=>(r[n]=s[n],r),{}):s)}function qt(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(s=>qt(e[s],t[s])):!1}function os(e,t){if(e===t)return e;const s=Te(e)&&Te(t);if(s||oe(e)&&oe(t)){const r=s?e:Object.keys(e),n=r.length,o=s?t:Object.keys(t),a=o.length,u=s?[]:{},h=new Set(r);let l=0;for(let g=0;g<a;g++){const d=s?g:o[g];(!s&&h.has(d)||s)&&e[d]===void 0&&t[d]===void 0?(u[d]=void 0,l++):(u[d]=os(e[d],t[d]),u[d]===e[d]&&e[d]!==void 0&&l++)}return n===a&&l===n?e:u}return t}function Xt(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function Te(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function oe(e){if(!je(e))return!1;const t=e.constructor;if(t===void 0)return!0;const s=t.prototype;return!(!je(s)||!s.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function je(e){return Object.prototype.toString.call(e)==="[object Object]"}function zs(e){return new Promise(t=>{setTimeout(t,e)})}function ae(e,t,s){return typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?os(e,t):t}function Ws(e,t,s=0){const r=[...e,t];return s&&r.length>s?r.slice(1):r}function Js(e,t,s=0){const r=[t,...e];return s&&r.length>s?r.slice(0,-1):r}var Pe=Symbol();function as(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Pe?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function us(e,t){return typeof e=="function"?e(...t):!!e}var ht,X,St,qe,Ys=(qe=class extends It{constructor(){super();f(this,ht);f(this,X);f(this,St);c(this,St,t=>{if(!bt&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){i(this,X)||this.setEventListener(i(this,St))}onUnsubscribe(){var t;this.hasListeners()||((t=i(this,X))==null||t.call(this),c(this,X,void 0))}setEventListener(t){var s;c(this,St,t),(s=i(this,X))==null||s.call(this),c(this,X,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){i(this,ht)!==t&&(c(this,ht,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof i(this,ht)=="boolean"?i(this,ht):globalThis.document?.visibilityState!=="hidden"}},ht=new WeakMap,X=new WeakMap,St=new WeakMap,qe),Ce=new Ys,wt,Z,Pt,Ue,Xs=(Ue=class extends It{constructor(){super();f(this,wt,!0);f(this,Z);f(this,Pt);c(this,Pt,t=>{if(!bt&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}})}onSubscribe(){i(this,Z)||this.setEventListener(i(this,Pt))}onUnsubscribe(){var t;this.hasListeners()||((t=i(this,Z))==null||t.call(this),c(this,Z,void 0))}setEventListener(t){var s;c(this,Pt,t),(s=i(this,Z))==null||s.call(this),c(this,Z,t(this.setOnline.bind(this)))}setOnline(t){i(this,wt)!==t&&(c(this,wt,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return i(this,wt)}},wt=new WeakMap,Z=new WeakMap,Pt=new WeakMap,Ue),Zt=new Xs;function ue(){let e,t;const s=new Promise((n,o)=>{e=n,t=o});s.status="pending",s.catch(()=>{});function r(n){Object.assign(s,n),delete s.resolve,delete s.reject}return s.resolve=n=>{r({status:"fulfilled",value:n}),e(n)},s.reject=n=>{r({status:"rejected",reason:n}),t(n)},s}function Zs(e){return Math.min(1e3*2**e,3e4)}function cs(e){return(e??"online")==="online"?Zt.isOnline():!0}var hs=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function ie(e){return e instanceof hs}function ls(e){let t=!1,s=0,r=!1,n;const o=ue(),a=b=>{r||(E(new hs(b)),e.abort?.())},u=()=>{t=!0},h=()=>{t=!1},l=()=>Ce.isFocused()&&(e.networkMode==="always"||Zt.isOnline())&&e.canRun(),g=()=>cs(e.networkMode)&&e.canRun(),d=b=>{r||(r=!0,e.onSuccess?.(b),n?.(),o.resolve(b))},E=b=>{r||(r=!0,e.onError?.(b),n?.(),o.reject(b))},R=()=>new Promise(b=>{n=C=>{(r||l())&&b(C)},e.onPause?.()}).then(()=>{n=void 0,r||e.onContinue?.()}),P=()=>{if(r)return;let b;const C=s===0?e.initialPromise:void 0;try{b=C??e.fn()}catch(j){b=Promise.reject(j)}Promise.resolve(b).then(d).catch(j=>{if(r)return;const q=e.retry??(bt?0:3),G=e.retryDelay??Zs,J=typeof G=="function"?G(s,j):G,ct=q===!0||typeof q=="number"&&s<q||typeof q=="function"&&q(s,j);if(t||!ct){E(j);return}s++,e.onFail?.(s,j),zs(J).then(()=>l()?void 0:R()).then(()=>{t?E(j):P()})})};return{promise:o,cancel:a,continue:()=>(n?.(),o),cancelRetry:u,continueRetry:h,canStart:g,start:()=>(g()?P():R().then(P),o)}}var tr=e=>setTimeout(e,0);function er(){let e=[],t=0,s=u=>{u()},r=u=>{u()},n=tr;const o=u=>{t?e.push(u):n(()=>{s(u)})},a=()=>{const u=e;e=[],u.length&&n(()=>{r(()=>{u.forEach(h=>{s(h)})})})};return{batch:u=>{let h;t++;try{h=u()}finally{t--,t||a()}return h},batchCalls:u=>(...h)=>{o(()=>{u(...h)})},schedule:o,setNotifyFunction:u=>{s=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{n=u}}}var w=er(),lt,Le,fs=(Le=class{constructor(){f(this,lt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ne(this.gcTime)&&c(this,lt,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(bt?1/0:5*60*1e3))}clearGcTimeout(){i(this,lt)&&(clearTimeout(i(this,lt)),c(this,lt,void 0))}},lt=new WeakMap,Le),Ct,ft,k,dt,F,Ut,pt,U,B,$e,sr=($e=class extends fs{constructor(t){super();f(this,U);f(this,Ct);f(this,ft);f(this,k);f(this,dt);f(this,F);f(this,Ut);f(this,pt);c(this,pt,!1),c(this,Ut,t.defaultOptions),this.setOptions(t.options),this.observers=[],c(this,dt,t.client),c(this,k,i(this,dt).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,c(this,Ct,rr(this.options)),this.state=t.state??i(this,Ct),this.scheduleGc()}get meta(){return this.options.meta}get promise(){return i(this,F)?.promise}setOptions(t){this.options={...i(this,Ut),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&i(this,k).remove(this)}setData(t,s){const r=ae(this.state.data,t,this.options);return p(this,U,B).call(this,{data:r,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),r}setState(t,s){p(this,U,B).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){const s=i(this,F)?.promise;return i(this,F)?.cancel(t),s?s.then(M).catch(M):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(i(this,Ct))}isActive(){return this.observers.some(t=>A(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Pe||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ut(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!ns(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),i(this,F)?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),i(this,F)?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),i(this,k).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(i(this,F)&&(i(this,pt)?i(this,F).cancel({revert:!0}):i(this,F).cancelRetry()),this.scheduleGc()),i(this,k).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||p(this,U,B).call(this,{type:"invalidate"})}fetch(t,s){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(i(this,F))return i(this,F).continueRetry(),i(this,F).promise}if(t&&this.setOptions(t),!this.options.queryFn){const l=this.observers.find(g=>g.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,n=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(c(this,pt,!0),r.signal)})},o=()=>{const l=as(this.options,s),d=(()=>{const E={client:i(this,dt),queryKey:this.queryKey,meta:this.meta};return n(E),E})();return c(this,pt,!1),this.options.persister?this.options.persister(l,d,this):l(d)},u=(()=>{const l={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:i(this,dt),state:this.state,fetchFn:o};return n(l),l})();this.options.behavior?.onFetch(u,this),c(this,ft,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==u.fetchOptions?.meta)&&p(this,U,B).call(this,{type:"fetch",meta:u.fetchOptions?.meta});const h=l=>{ie(l)&&l.silent||p(this,U,B).call(this,{type:"error",error:l}),ie(l)||(i(this,k).config.onError?.(l,this),i(this,k).config.onSettled?.(this.state.data,l,this)),this.scheduleGc()};return c(this,F,ls({initialPromise:s?.initialPromise,fn:u.fetchFn,abort:r.abort.bind(r),onSuccess:l=>{if(l===void 0){h(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(l)}catch(g){h(g);return}i(this,k).config.onSuccess?.(l,this),i(this,k).config.onSettled?.(l,this.state.error,this),this.scheduleGc()},onError:h,onFail:(l,g)=>{p(this,U,B).call(this,{type:"failed",failureCount:l,error:g})},onPause:()=>{p(this,U,B).call(this,{type:"pause"})},onContinue:()=>{p(this,U,B).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0})),i(this,F).start()}},Ct=new WeakMap,ft=new WeakMap,k=new WeakMap,dt=new WeakMap,F=new WeakMap,Ut=new WeakMap,pt=new WeakMap,U=new WeakSet,B=function(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...ds(r.data,this.options),fetchMeta:t.meta??null};case"success":return c(this,ft,void 0),{...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const n=t.error;return ie(n)&&n.revert&&i(this,ft)?{...i(this,ft),fetchStatus:"idle"}:{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),w.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),i(this,k).notify({query:this,type:"updated",action:t})})},$e);function ds(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:cs(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function rr(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=t!==void 0,r=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var N,Ne,ir=(Ne=class extends It{constructor(t={}){super();f(this,N);this.config=t,c(this,N,new Map)}build(t,s,r){const n=s.queryKey,o=s.queryHash??we(n,s);let a=this.get(o);return a||(a=new sr({client:t,queryKey:n,queryHash:o,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(n)}),this.add(a)),a}add(t){i(this,N).has(t.queryHash)||(i(this,N).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=i(this,N).get(t.queryHash);s&&(t.destroy(),s===t&&i(this,N).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){w.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return i(this,N).get(t)}getAll(){return[...i(this,N).values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Qe(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>Qe(t,r)):s}notify(t){w.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){w.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){w.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},N=new WeakMap,Ne),K,_,yt,H,Y,Ke,nr=(Ke=class extends fs{constructor(t){super();f(this,H);f(this,K);f(this,_);f(this,yt);this.mutationId=t.mutationId,c(this,_,t.mutationCache),c(this,K,[]),this.state=t.state||ps(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){i(this,K).includes(t)||(i(this,K).push(t),this.clearGcTimeout(),i(this,_).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){c(this,K,i(this,K).filter(s=>s!==t)),this.scheduleGc(),i(this,_).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){i(this,K).length||(this.state.status==="pending"?this.scheduleGc():i(this,_).remove(this))}continue(){return i(this,yt)?.continue()??this.execute(this.state.variables)}async execute(t){const s=()=>{p(this,H,Y).call(this,{type:"continue"})};c(this,yt,ls({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(o,a)=>{p(this,H,Y).call(this,{type:"failed",failureCount:o,error:a})},onPause:()=>{p(this,H,Y).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>i(this,_).canRun(this)}));const r=this.state.status==="pending",n=!i(this,yt).canStart();try{if(r)s();else{p(this,H,Y).call(this,{type:"pending",variables:t,isPaused:n}),await i(this,_).config.onMutate?.(t,this);const a=await this.options.onMutate?.(t);a!==this.state.context&&p(this,H,Y).call(this,{type:"pending",context:a,variables:t,isPaused:n})}const o=await i(this,yt).start();return await i(this,_).config.onSuccess?.(o,t,this.state.context,this),await this.options.onSuccess?.(o,t,this.state.context),await i(this,_).config.onSettled?.(o,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(o,null,t,this.state.context),p(this,H,Y).call(this,{type:"success",data:o}),o}catch(o){try{throw await i(this,_).config.onError?.(o,t,this.state.context,this),await this.options.onError?.(o,t,this.state.context),await i(this,_).config.onSettled?.(void 0,o,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,o,t,this.state.context),o}finally{p(this,H,Y).call(this,{type:"error",error:o})}}finally{i(this,_).runNext(this)}}},K=new WeakMap,_=new WeakMap,yt=new WeakMap,H=new WeakSet,Y=function(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),w.batch(()=>{i(this,K).forEach(r=>{r.onMutationUpdate(t)}),i(this,_).notify({mutation:this,type:"updated",action:t})})},Ke);function ps(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var V,L,Lt,He,or=(He=class extends It{constructor(t={}){super();f(this,V);f(this,L);f(this,Lt);this.config=t,c(this,V,new Set),c(this,L,new Map),c(this,Lt,0)}build(t,s,r){const n=new nr({mutationCache:this,mutationId:++Bt(this,Lt)._,options:t.defaultMutationOptions(s),state:r});return this.add(n),n}add(t){i(this,V).add(t);const s=zt(t);if(typeof s=="string"){const r=i(this,L).get(s);r?r.push(t):i(this,L).set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(i(this,V).delete(t)){const s=zt(t);if(typeof s=="string"){const r=i(this,L).get(s);if(r)if(r.length>1){const n=r.indexOf(t);n!==-1&&r.splice(n,1)}else r[0]===t&&i(this,L).delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=zt(t);if(typeof s=="string"){const n=i(this,L).get(s)?.find(o=>o.state.status==="pending");return!n||n===t}else return!0}runNext(t){const s=zt(t);return typeof s=="string"?i(this,L).get(s)?.find(n=>n!==t&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){w.batch(()=>{i(this,V).forEach(t=>{this.notify({type:"removed",mutation:t})}),i(this,V).clear(),i(this,L).clear()})}getAll(){return Array.from(i(this,V))}find(t){const s={exact:!0,...t};return this.getAll().find(r=>De(s,r))}findAll(t={}){return this.getAll().filter(s=>De(t,s))}notify(t){w.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return w.batch(()=>Promise.all(t.map(s=>s.continue().catch(M))))}},V=new WeakMap,L=new WeakMap,Lt=new WeakMap,He);function zt(e){return e.options.scope?.id}function te(e){return{onFetch:(t,s)=>{const r=t.options,n=t.fetchOptions?.meta?.fetchMore?.direction,o=t.state.data?.pages||[],a=t.state.data?.pageParams||[];let u={pages:[],pageParams:[]},h=0;const l=async()=>{let g=!1;const d=P=>{Object.defineProperty(P,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},E=as(t.options,t.fetchOptions),R=async(P,b,C)=>{if(g)return Promise.reject();if(b==null&&P.pages.length)return Promise.resolve(P);const q=(()=>{const kt={client:t.client,queryKey:t.queryKey,pageParam:b,direction:C?"backward":"forward",meta:t.options.meta};return d(kt),kt})(),G=await E(q),{maxPages:J}=t.options,ct=C?Js:Ws;return{pages:ct(P.pages,G,J),pageParams:ct(P.pageParams,b,J)}};if(n&&o.length){const P=n==="backward",b=P?ys:ce,C={pages:o,pageParams:a},j=b(r,C);u=await R(C,j,P)}else{const P=e??o.length;do{const b=h===0?a[0]??r.initialPageParam:ce(r,u);if(h>0&&b==null)break;u=await R(u,b),h++}while(h<P)}return u};t.options.persister?t.fetchFn=()=>t.options.persister?.(l,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s):t.fetchFn=l}}}function ce(e,{pages:t,pageParams:s}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,s[r],s):void 0}function ys(e,{pages:t,pageParams:s}){return t.length>0?e.getPreviousPageParam?.(t[0],t,s[0],s):void 0}function ar(e,t){return t?ce(e,t)!=null:!1}function ur(e,t){return!t||!e.getPreviousPageParam?!1:ys(e,t)!=null}var O,tt,et,Et,Ft,st,_t,xt,Ge,_r=(Ge=class{constructor(e={}){f(this,O);f(this,tt);f(this,et);f(this,Et);f(this,Ft);f(this,st);f(this,_t);f(this,xt);c(this,O,e.queryCache||new ir),c(this,tt,e.mutationCache||new or),c(this,et,e.defaultOptions||{}),c(this,Et,new Map),c(this,Ft,new Map),c(this,st,0)}mount(){Bt(this,st)._++,i(this,st)===1&&(c(this,_t,Ce.subscribe(async e=>{e&&(await this.resumePausedMutations(),i(this,O).onFocus())})),c(this,xt,Zt.subscribe(async e=>{e&&(await this.resumePausedMutations(),i(this,O).onOnline())})))}unmount(){var e,t;Bt(this,st)._--,i(this,st)===0&&((e=i(this,_t))==null||e.call(this),c(this,_t,void 0),(t=i(this,xt))==null||t.call(this),c(this,xt,void 0))}isFetching(e){return i(this,O).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return i(this,tt).findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return i(this,O).get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=i(this,O).build(this,t),r=s.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(ut(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return i(this,O).findAll(e).map(({queryKey:t,state:s})=>{const r=s.data;return[t,r]})}setQueryData(e,t,s){const r=this.defaultQueryOptions({queryKey:e}),o=i(this,O).get(r.queryHash)?.state.data,a=Vs(t,o);if(a!==void 0)return i(this,O).build(this,r).setData(a,{...s,manual:!0})}setQueriesData(e,t,s){return w.batch(()=>i(this,O).findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,s)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return i(this,O).get(t.queryHash)?.state}removeQueries(e){const t=i(this,O);w.batch(()=>{t.findAll(e).forEach(s=>{t.remove(s)})})}resetQueries(e,t){const s=i(this,O);return w.batch(()=>(s.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const s={revert:!0,...t},r=w.batch(()=>i(this,O).findAll(e).map(n=>n.cancel(s)));return Promise.all(r).then(M).catch(M)}invalidateQueries(e,t={}){return w.batch(()=>(i(this,O).findAll(e).forEach(s=>{s.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const s={...t,cancelRefetch:t.cancelRefetch??!0},r=w.batch(()=>i(this,O).findAll(e).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let o=n.fetch(void 0,s);return s.throwOnError||(o=o.catch(M)),n.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(M)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const s=i(this,O).build(this,t);return s.isStaleByTime(ut(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(M).catch(M)}fetchInfiniteQuery(e){return e.behavior=te(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(M).catch(M)}ensureInfiniteQueryData(e){return e.behavior=te(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Zt.isOnline()?i(this,tt).resumePausedMutations():Promise.resolve()}getQueryCache(){return i(this,O)}getMutationCache(){return i(this,tt)}getDefaultOptions(){return i(this,et)}setDefaultOptions(e){c(this,et,e)}setQueryDefaults(e,t){i(this,Et).set(Ot(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...i(this,Et).values()],s={};return t.forEach(r=>{qt(e,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(e,t){i(this,Ft).set(Ot(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...i(this,Ft).values()],s={};return t.forEach(r=>{qt(e,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t={...i(this,et).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=we(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Pe&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...i(this,et).mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){i(this,O).clear(),i(this,tt).clear()}},O=new WeakMap,tt=new WeakMap,et=new WeakMap,Et=new WeakMap,Ft=new WeakMap,st=new WeakMap,_t=new WeakMap,xt=new WeakMap,Ge),D,v,$t,x,vt,Mt,rt,it,Nt,Qt,Dt,mt,gt,nt,Tt,m,At,he,le,fe,de,pe,ye,ve,ms,Be,vs=(Be=class extends It{constructor(t,s){super();f(this,m);f(this,D);f(this,v);f(this,$t);f(this,x);f(this,vt);f(this,Mt);f(this,rt);f(this,it);f(this,Nt);f(this,Qt);f(this,Dt);f(this,mt);f(this,gt);f(this,nt);f(this,Tt,new Set);this.options=s,c(this,D,t),c(this,it,null),c(this,rt,ue()),this.options.experimental_prefetchInRender||i(this,rt).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,v).addObserver(this),Ie(i(this,v),this.options)?p(this,m,At).call(this):this.updateResult(),p(this,m,de).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return me(i(this,v),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return me(i(this,v),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,p(this,m,pe).call(this),p(this,m,ye).call(this),i(this,v).removeObserver(this)}setOptions(t){const s=this.options,r=i(this,v);if(this.options=i(this,D).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof A(this.options.enabled,i(this,v))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");p(this,m,ve).call(this),i(this,v).setOptions(this.options),s._defaulted&&!Xt(this.options,s)&&i(this,D).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,v),observer:this});const n=this.hasListeners();n&&ke(i(this,v),r,this.options,s)&&p(this,m,At).call(this),this.updateResult(),n&&(i(this,v)!==r||A(this.options.enabled,i(this,v))!==A(s.enabled,i(this,v))||ut(this.options.staleTime,i(this,v))!==ut(s.staleTime,i(this,v)))&&p(this,m,he).call(this);const o=p(this,m,le).call(this);n&&(i(this,v)!==r||A(this.options.enabled,i(this,v))!==A(s.enabled,i(this,v))||o!==i(this,nt))&&p(this,m,fe).call(this,o)}getOptimisticResult(t){const s=i(this,D).getQueryCache().build(i(this,D),t),r=this.createResult(s,t);return hr(this,r)&&(c(this,x,r),c(this,Mt,this.options),c(this,vt,i(this,v).state)),r}getCurrentResult(){return i(this,x)}trackResult(t,s){return new Proxy(t,{get:(r,n)=>(this.trackProp(n),s?.(n),Reflect.get(r,n))})}trackProp(t){i(this,Tt).add(t)}getCurrentQuery(){return i(this,v)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=i(this,D).defaultQueryOptions(t),r=i(this,D).getQueryCache().build(i(this,D),s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return p(this,m,At).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,x)))}createResult(t,s){const r=i(this,v),n=this.options,o=i(this,x),a=i(this,vt),u=i(this,Mt),l=t!==r?t.state:i(this,$t),{state:g}=t;let d={...g},E=!1,R;if(s._optimisticResults){const I=this.hasListeners(),Ht=!I&&Ie(t,s),Rt=I&&ke(t,r,s,n);(Ht||Rt)&&(d={...d,...ds(g.data,t.options)}),s._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:P,errorUpdatedAt:b,status:C}=d;R=d.data;let j=!1;if(s.placeholderData!==void 0&&R===void 0&&C==="pending"){let I;o?.isPlaceholderData&&s.placeholderData===u?.placeholderData?(I=o.data,j=!0):I=typeof s.placeholderData=="function"?s.placeholderData(i(this,Dt)?.state.data,i(this,Dt)):s.placeholderData,I!==void 0&&(C="success",R=ae(o?.data,I,s),E=!0)}if(s.select&&R!==void 0&&!j)if(o&&R===a?.data&&s.select===i(this,Nt))R=i(this,Qt);else try{c(this,Nt,s.select),R=s.select(R),R=ae(o?.data,R,s),c(this,Qt,R),c(this,it,null)}catch(I){c(this,it,I)}i(this,it)&&(P=i(this,it),R=i(this,Qt),b=Date.now(),C="error");const q=d.fetchStatus==="fetching",G=C==="pending",J=C==="error",ct=G&&q,kt=R!==void 0,$={status:C,fetchStatus:d.fetchStatus,isPending:G,isSuccess:C==="success",isError:J,isInitialLoading:ct,isLoading:ct,data:R,dataUpdatedAt:d.dataUpdatedAt,error:P,errorUpdatedAt:b,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>l.dataUpdateCount||d.errorUpdateCount>l.errorUpdateCount,isFetching:q,isRefetching:q&&!G,isLoadingError:J&&!kt,isPaused:d.fetchStatus==="paused",isPlaceholderData:E,isRefetchError:J&&kt,isStale:Ee(t,s),refetch:this.refetch,promise:i(this,rt),isEnabled:A(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const I=Gt=>{$.status==="error"?Gt.reject($.error):$.data!==void 0&&Gt.resolve($.data)},Ht=()=>{const Gt=c(this,rt,$.promise=ue());I(Gt)},Rt=i(this,rt);switch(Rt.status){case"pending":t.queryHash===r.queryHash&&I(Rt);break;case"fulfilled":($.status==="error"||$.data!==Rt.value)&&Ht();break;case"rejected":($.status!=="error"||$.error!==Rt.reason)&&Ht();break}}return $}updateResult(){const t=i(this,x),s=this.createResult(i(this,v),this.options);if(c(this,vt,i(this,v).state),c(this,Mt,this.options),i(this,vt).data!==void 0&&c(this,Dt,i(this,v)),Xt(s,t))return;c(this,x,s);const r=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,o=typeof n=="function"?n():n;if(o==="all"||!o&&!i(this,Tt).size)return!0;const a=new Set(o??i(this,Tt));return this.options.throwOnError&&a.add("error"),Object.keys(i(this,x)).some(u=>{const h=u;return i(this,x)[h]!==t[h]&&a.has(h)})};p(this,m,ms).call(this,{listeners:r()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&p(this,m,de).call(this)}},D=new WeakMap,v=new WeakMap,$t=new WeakMap,x=new WeakMap,vt=new WeakMap,Mt=new WeakMap,rt=new WeakMap,it=new WeakMap,Nt=new WeakMap,Qt=new WeakMap,Dt=new WeakMap,mt=new WeakMap,gt=new WeakMap,nt=new WeakMap,Tt=new WeakMap,m=new WeakSet,At=function(t){p(this,m,ve).call(this);let s=i(this,v).fetch(this.options,t);return t?.throwOnError||(s=s.catch(M)),s},he=function(){p(this,m,pe).call(this);const t=ut(this.options.staleTime,i(this,v));if(bt||i(this,x).isStale||!ne(t))return;const r=ns(i(this,x).dataUpdatedAt,t)+1;c(this,mt,setTimeout(()=>{i(this,x).isStale||this.updateResult()},r))},le=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,v)):this.options.refetchInterval)??!1},fe=function(t){p(this,m,ye).call(this),c(this,nt,t),!(bt||A(this.options.enabled,i(this,v))===!1||!ne(i(this,nt))||i(this,nt)===0)&&c(this,gt,setInterval(()=>{(this.options.refetchIntervalInBackground||Ce.isFocused())&&p(this,m,At).call(this)},i(this,nt)))},de=function(){p(this,m,he).call(this),p(this,m,fe).call(this,p(this,m,le).call(this))},pe=function(){i(this,mt)&&(clearTimeout(i(this,mt)),c(this,mt,void 0))},ye=function(){i(this,gt)&&(clearInterval(i(this,gt)),c(this,gt,void 0))},ve=function(){const t=i(this,D).getQueryCache().build(i(this,D),this.options);if(t===i(this,v))return;const s=i(this,v);c(this,v,t),c(this,$t,t.state),this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))},ms=function(t){w.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(i(this,x))}),i(this,D).getQueryCache().notify({query:i(this,v),type:"observerResultsUpdated"})})},Be);function cr(e,t){return A(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Ie(e,t){return cr(e,t)||e.state.data!==void 0&&me(e,t,t.refetchOnMount)}function me(e,t,s){if(A(t.enabled,e)!==!1&&ut(t.staleTime,e)!=="static"){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&Ee(e,t)}return!1}function ke(e,t,s,r){return(e!==t||A(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Ee(e,s)}function Ee(e,t){return A(t.enabled,e)!==!1&&e.isStaleByTime(ut(t.staleTime,e))}function hr(e,t){return!Xt(e.getCurrentResult(),t)}var lr=class extends vs{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:te()})}getOptimisticResult(e){return e.behavior=te(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:s}=e,r=super.createResult(e,t),{isFetching:n,isRefetching:o,isError:a,isRefetchError:u}=r,h=s.fetchMeta?.fetchMore?.direction,l=a&&h==="forward",g=n&&h==="forward",d=a&&h==="backward",E=n&&h==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:ar(t,s.data),hasPreviousPage:ur(t,s.data),isFetchNextPageError:l,isFetchingNextPage:g,isFetchPreviousPageError:d,isFetchingPreviousPage:E,isRefetchError:u&&!l&&!d,isRefetching:o&&!g&&!E}}},ot,at,T,z,W,Yt,ge,Ve,fr=(Ve=class extends It{constructor(t,s){super();f(this,W);f(this,ot);f(this,at);f(this,T);f(this,z);c(this,ot,t),this.setOptions(s),this.bindMethods(),p(this,W,Yt).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const s=this.options;this.options=i(this,ot).defaultMutationOptions(t),Xt(this.options,s)||i(this,ot).getMutationCache().notify({type:"observerOptionsUpdated",mutation:i(this,T),observer:this}),s?.mutationKey&&this.options.mutationKey&&Ot(s.mutationKey)!==Ot(this.options.mutationKey)?this.reset():i(this,T)?.state.status==="pending"&&i(this,T).setOptions(this.options)}onUnsubscribe(){this.hasListeners()||i(this,T)?.removeObserver(this)}onMutationUpdate(t){p(this,W,Yt).call(this),p(this,W,ge).call(this,t)}getCurrentResult(){return i(this,at)}reset(){i(this,T)?.removeObserver(this),c(this,T,void 0),p(this,W,Yt).call(this),p(this,W,ge).call(this)}mutate(t,s){return c(this,z,s),i(this,T)?.removeObserver(this),c(this,T,i(this,ot).getMutationCache().build(i(this,ot),this.options)),i(this,T).addObserver(this),i(this,T).execute(t)}},ot=new WeakMap,at=new WeakMap,T=new WeakMap,z=new WeakMap,W=new WeakSet,Yt=function(){const t=i(this,T)?.state??ps();c(this,at,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},ge=function(t){w.batch(()=>{if(i(this,z)&&this.hasListeners()){const s=i(this,at).variables,r=i(this,at).context;t?.type==="success"?(i(this,z).onSuccess?.(t.data,s,r),i(this,z).onSettled?.(t.data,null,s,r)):t?.type==="error"&&(i(this,z).onError?.(t.error,s,r),i(this,z).onSettled?.(void 0,t.error,s,r))}this.listeners.forEach(s=>{s(i(this,at))})})},Ve),gs=S.createContext(void 0),bs=e=>{const t=S.useContext(gs);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},xr=({client:e,children:t})=>(S.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),Bs.jsx(gs.Provider,{value:e,children:t})),Os=S.createContext(!1),dr=()=>S.useContext(Os);Os.Provider;function pr(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var yr=S.createContext(pr()),vr=()=>S.useContext(yr),mr=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},gr=e=>{S.useEffect(()=>{e.clearReset()},[e])},br=({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:n})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(n&&e.data===void 0||us(s,[e.error,r])),Or=e=>{if(e.suspense){const t=r=>r==="static"?r:Math.max(r??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...r)=>t(s(...r)):t(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Rr=(e,t)=>e.isLoading&&e.isFetching&&!t,Sr=(e,t)=>e?.suspense&&t.isPending,Ae=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function Rs(e,t,s){const r=dr(),n=vr(),o=bs(),a=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(a),a._optimisticResults=r?"isRestoring":"optimistic",Or(a),mr(a,n),gr(n);const u=!o.getQueryCache().get(a.queryHash),[h]=S.useState(()=>new t(o,a)),l=h.getOptimisticResult(a),g=!r&&e.subscribed!==!1;if(S.useSyncExternalStore(S.useCallback(d=>{const E=g?h.subscribe(w.batchCalls(d)):M;return h.updateResult(),E},[h,g]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),S.useEffect(()=>{h.setOptions(a)},[a,h]),Sr(a,l))throw Ae(a,h,n);if(br({result:l,errorResetBoundary:n,throwOnError:a.throwOnError,query:o.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw l.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(a,l),a.experimental_prefetchInRender&&!bt&&Rr(l,r)&&(u?Ae(a,h,n):o.getQueryCache().get(a.queryHash)?.promise)?.catch(M).finally(()=>{h.updateResult()}),a.notifyOnChangeProps?l:h.trackResult(l)}function Mr(e,t){return Rs(e,vs)}function Qr(e,t){const s=bs(),[r]=S.useState(()=>new fr(s,e));S.useEffect(()=>{r.setOptions(e)},[r,e]);const n=S.useSyncExternalStore(S.useCallback(a=>r.subscribe(w.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=S.useCallback((a,u)=>{r.mutate(a,u).catch(M)},[r]);if(n.error&&us(r.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}function Dr(e,t){return Rs(e,lr)}export{_r as Q,Fr as R,Er as a,Us as b,Cr as c,bs as d,Qr as e,Dr as f,ws as g,xr as h,Bs as j,S as r,Mr as u};
